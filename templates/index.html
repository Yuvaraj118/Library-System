<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>Library Management System</title>
</head>

<body>
    <center>
        <header>
            <h1>Library Management System</h1>
        </header>
    </center>
    <main>
        <section id="bookForm">
            <h2>Add New Book</h2>
            <form action="http://127.0.0.1:5000/add" method="post">
                <label for="title">Title:</label>
                <input type="text" id="title" name="title" placeholder="Title" required><br>

                <label for="author">Author:</label>
                <input type="text" id="author" name="author" placeholder="Author" required><br>

                <label for="copies">Copies:</label>
                <input type="number" id="copies" name="copies" placeholder="Copies" required><br>

                <button type="Submit" onclick="addBook()">Add Book</button>
            </form>
        </section>

        <section id="bookList">
            <h2>Available Books</h2>
            <table>
                <thead>
                    <tr>
                        <th>Title</th>
                        <th>Author</th>
                        <th>Copies</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Harry Potter</td>
                        <td>J.K.Rowling</td>
                        <td>18</td>
                        <td><button>Borrow</button></td>
                    </tr>
                    <tr>
                        <td>Rich Dad Poor Dad</td>
                        <td>Robert Kiyosaki, Sharon Lechter</td>
                        <td>7</td>
                        <td><button>Borrow</button></td>
                    </tr>
                    <tr>
                        <td>Atomic Habits</td>
                        <td>James Clear</td>
                        <td>45</td>
                        <td><button>Borrow</button></td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section id="borrowForm">
            <h2>Borrow a Book</h2>
            <form action="http://127.0.0.1:5000/borrow_book" method="post">
                <label for="memberId">Member ID:</label>
                <input type="text" id="memberId" name="memberId" required><br>

                <label for="bookTitle">Book Title:</label>
                <input type="text" id="bookTitle" name="bookTitle" required><br>

                <label for="bookAuthor">Book Author:</label>
                <input type="text" id="bookAuthor" name="bookAuthor" required><br>

                <button type="submit">Borrow</button>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Library Management System. All rights reserved.</p>
    </footer>

    <script>
        function addBook() {
            var title = document.getElementById("title").value;
            var author = document.getElementById("author").value;
            var copies = document.getElementById("copies").value;

            var newRow = "<tr><td>" + title + "</td><td>" + author + "</td><td>" + copies + "</td><td><button onclick='editBook(this)'>Edit</button> <button onclick='deleteBook(this)'>Delete</button></td></tr>";

            document.querySelector("#bookList tbody").insertAdjacentHTML("beforeend", newRow);

            document.getElementById("title").value = "";
            document.getElementById("author").value = "";
            document.getElementById("copies").value = "";
        }

        function editBook(button) {
            var row = button.parentNode.parentNode;
            var title = row.cells[0].innerText;
            var author = row.cells[1].innerText;
            var copies = row.cells[2].innerText;

            document.getElementById("title").value = title;
            document.getElementById("author").value = author;
            document.getElementById("copies").value = copies;

            row.remove();
        }

        function deleteBook(button) {
            var row = button.parentNode.parentNode;
            row.remove();
        }

    </script>
</body>

</html>